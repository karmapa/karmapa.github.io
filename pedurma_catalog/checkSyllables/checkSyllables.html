<html>
<script src="validSyllables.js"></script>
<meta charset="utf8"/>
<style>
* {font-size: 120%}
</style>
<textarea cols="60" rows="10" id="sutra" onInput="window.delaytime()">
རྩོད་པ་དང་། །དགེ་འདུན་དབྱེན་རྣམས་བསྡུས་པ་ཡིན། །རབ་ཏུ་འབྱུང་བའི་གཞིའི་སྤྱི་སྡོམ་ལ། ཤཱ་རིའི་བུ་དང་མུ་སྟེགས་ཅན། །དགེ་ཚུལ་གཉིས་དང་བྱ་རོག་སྐྲོད། །དགྲ་བཅོམ་བསད་དང་ལག་རྡུམ་གྱི། །སྡེ་ཚན་
ཡང་དག་བསྡུས་པ་ཡིན། །སྡོམ་ལ། ཤཱ་རིའི་བུ་དང་རབ་འབྱུང་དང་། །བསྙེན་
</textarea>
<div id="out"></div>
<div id="out2"></div>
<script>
	var delaytime=function(){
		var delay=setTimeout(spellcheck,250); 
	}
	var spellcheck=function(){
		var text=document.getElementById("sutra").value;
		text=text.replace(/[\u0f20-\u0fff]+/g,function(m){
			var invalid=validSyllables.indexOf(m)==-1;
			if(invalid) {
				if((m.substr(m.length-2) == "འི" || m.substr(m.length-2) == "འོ"))	return "<span style='color:orange'>"+m+"</span>";	
				return "<span style='color:red'>"+m+"</span>";
			}
			return m;
		});
		document.getElementById("out").innerHTML=text;
	}
	spellcheck();
</script>
</html>